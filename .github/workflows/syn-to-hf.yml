name: Sync to Hugging Face Spaces

on:
  push:
    branches:
      - main
  workflow_dispatch:  # Allows manual triggering

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4  # Updated to latest

      # Optional: Remove any HF-blocked files (e.g., >10MB without LFS, or disallowed types like .exe)
      # - name: Remove bad files
      #   run: rm -rf path/to/bad/files  # Uncomment and customize if needed

      - name: Sync to Hugging Face Spaces
        uses: JacobLinCool/huggingface-sync@v1
        with:
          github: ${{ secrets.GITHUB_TOKEN }}  # Default; handles checkout auth
          user: samir72                       # Your HF username
          space: chatassistant_retail         # Your Space name
          token: ${{ secrets.HF_TOKEN }}      # Your HF write token (already set up)